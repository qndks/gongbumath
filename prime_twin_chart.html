<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no">
		<link rel="shortcut icon" href="./public/favicon/favicon.ico">
		<link rel="stylesheet" href="./public/css/gongbumath.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
		<title>쌍둥이 소수 분포</title>
	</head>
	<body>
		<h1 class="math-heading"><a class="math-heading-link" href="./index.html">공부:수학</a></h1>
		<h2 class="math-heading">쌍둥이 소수 분포</h2>
		<input id="lim" type="text" value="100">
		<input type="button" onclick="primer();" value="완료">
		<p id="time"></p>
		<canvas id="myChart"></canvas>
		<script src="./public/js/isPrime.js"></script>
		<script>
			var t = document.getElementById('time');
			var lim = document.getElementById('lim');
			var result;
			var count;
			var labels;

			function primer() {
				result = [2, 3];
				twin = [3, 5];
				var l = Number(lim.value);
				var i;
				var t1 = performance.now();

				for (i = 6; i <= l; i += 6) {
					if (isPrime(i - 1, result) && isPrime(i + 1, result)) twin.push((i - 1), (i + 1));
					if (isPrime(i - 1, result)) result.push(i - 1);
                    if (isPrime(i + 1, result)) result.push(i + 1);
				}

				count = [];
				labels = [];
				twins = [];

				for (i = 1; i <= l; i += 1) {
					count.push(result.filter(function(el) {
			            return el <= i;
			        }).length);
          			labels.push(i);
					twins.push(twin.filter(function(el) {
			            return el <= i;
			        }).length);
				}

				var chart = new Chart(document.getElementById('myChart'), {
					type: 'line',
					data: {
						labels: labels,
						datasets: [{
				    	label: "소수 계량 함수",
				    	borderColor: '#000000',
							backgroundColor: 'transparent',
							pointBackgroundColor: 'transparent',
							pointBorderColor: 'transparent',
				    		data: count
						}, {
							label: "쌍둥이 소수 계량 함수",
							backgroundColor: 'transparent',
							pointBackgroundColor: 'transparent',
							pointBorderColor: 'transparent',
					    	borderColor: '#aaaaaa',
					    	data: twins
						}]
					},
					options: {
						elements: {
							line: {
								tension: 0
							}
						}
	    			}
				});

				var t2 = performance.now();
				t.innerHTML = Math.round((t2 - t1) * 100) / 100000 + ' 초';
			}
		</script>
	</body>
</html>
