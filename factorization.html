<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no">
		<link rel="shortcut icon" href="./public/favicon/favicon.ico">
		<link rel="stylesheet" href="./public/css/gongbumath.css">
		<title>소인수분해</title>
	</head>
	<body>
		<h1 class="math-heading"><a class="math-heading-link" href="./index.html">공부수학</a></h1>
		<h2 class="math-heading">소인수분해</h2>
		<p><a href="https://gongbu.herokuapp.com/study/소인수분해">소인수분해</a>는 어떤 수를 소수의 곱으로 분해하는 것이다.</p>
		<input id="num" type="text">
		<input type="button" onclick="primer();" value="완료">
		<br>
		<br>
		<p id="time"></p>
		<p id="output"></p>
		<script src="./public/js/big.min.js"></script>
		<script>
            var r;
			var t = document.getElementById('time');
			var num = document.getElementById('num');
			var o = document.getElementById('output');

            function isSquare(l) {
				var sq = Math.sqrt(l);
				return (sq === Math.floor(sq));
            }

			function primer() {
				var p = [];

				var n = Number(num.value);

				if (n !== Math.floor(n) || n < 0) {
					alert('수가 9007199254740991 보다 크거나, 정수가 아니거나, 0 보다 작습니다.');
					return;
				}

				if (n > 9007199254740991) {
					n = new Big(num.value);
					var sqn = n.sqrt().floor();
					var i;
					var k;

					var t1 = performance.now();

					for (i = new Big(2); i.lte(n.sqrt().ceil()); i = i.plus(1)) {
						if ((i.mod(6).toString() !== "5" && i.mod(6).toString() !== "1") && i.gt(3)) continue;
						if (n.mod(i).eq(0)) {
							n = n.div(i)
							p.push(i);
							i = new Big(1);
						}
					}

					if (!n.eq(1)) p.push(n);

					o.innerHTML = p.sort(function(a, b) {return Number(a.minus(b).toString())}).join(' * ');
					console.log(new Big(eval(o.innerHTML)).eq(new Big(num.value)));
					var t2 = performance.now();
					t.innerHTML = Math.round((t2 - t1) * 100) / 100000 + ' 초';
					return;
				}

				var sqn = Math.floor(Math.sqrt(n));
				var i;
				var k;

				var t1 = performance.now();

				for (i = 2; i <= Math.ceil(Math.sqrt(n)); i++) {
					if ((i % 6 !== 5 && i % 6 !== 1) && i > 3) continue;
					if (n % i === 0) {
						n /= i;
						p.push(i);
						i = 1;
					}
				}

				if (n !== 1) p.push(n);

				o.innerHTML = p.sort(function(a, b) {return a - b}).join(' * ');
				console.log(eval(o.innerHTML) === Number(num.value));
				var t2 = performance.now();
				t.innerHTML = Math.round((t2 - t1) * 100) / 100000 + ' 초';
			}
		</script>
	</body>
</html>
